(this.webpackJsonppicasso=this.webpackJsonppicasso||[]).push([[0],{147:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r,s=n(80),o=n(149),a=n.n(o),c=n(290);function i(e,t,n,s){n||(n=function(e){return!0});for(var o,a,c,i,l,u,d,h,p=(s=s||{}).cheerio||null,b=[],j="data-"+C(),m="data-"+C();;){for(a=(o=r.load(e,p))(t),i=null,c=0;c<a.length&&((i=a.eq(c)).attr(m)||!n(i));c++)i.attr(m,"1"),i=null;if(!i){b.push(e);break}i.attr(j,"1");var O=o.html(),f=O.indexOf(j),g=O.lastIndexOf("<",f);if(-1===g){b.push(e);break}var x=O.substr(0,g),v="";l=r.load("<div></div>")("div").eq(0);var w=i.parents();for(c=0;c<w.length;c++){var k=w.eq(c);if(k.is("[data-cheerio-root]"))break;var y=k.clone();y.empty(),l.empty(),l.append(y);var S=l.html(),I=S.indexOf(">");x+="</"+(u=(h=y)[0].tagName||h[0].name)+">",v=S.substr(0,I+1)+v}O=o.html(),l=r.load("<div></div>")("div").eq(0),i.removeAttr(j),l.append(i),u=l.html(),i.remove(),d=v+(O=o.html()).substr(g),x=D(x),b.push(x),b.push(u),e=D(d)}return b;function D(e){return(e=r.load(e,p))("["+m+"]").removeAttr(m),e=e.html()}function C(){return Math.floor(1e9*Math.random()).toString()}}function l(e){var t=n(231),r=(t(e,{allowedTags:t.defaults.allowedTags.concat(["img"])}),function(e){var t=(new DOMParser).parseFromString(e,"text/html"),r=Object(s.a)(t.querySelectorAll("style")).map((function(e){return e.textContent})),o=n(463),a=[/font-family/,/font-size/,/h[1-6]/,/margin/,/margin-top/,/margin-bottom/,/margin-left/,/margin-right/,/padding/,/padding-top/,/padding-bottom/,/padding-left/,/padding-right/],c=o(r[0],a);return console.log(c),c}(e)),o=i(e,"h1");console.log(o);for(var a=[],l=1;l<o.length-1;l+=2){var u=o[l],d=o[l+1],h={name:Object(c.a)(u).querySelector("h1").text,page:{html:u+d}};a.push(h)}return{book:{name:"DEFAULT NAME",currentSelectedChapter:0,chapters:a,style:"<style>"+r+"</style>"}}}"undefined"===typeof window?(e.exports=i,r=n(357)):(window.splitHtml=i,r={load:function(e){var t=a()("<div data-cheerio-root>"),n=a()(e);function r(e){return"<"===e[0]?a()(e):t.find(e)}return t.append(n),r.html=function(){return t.html()},r}})}).call(this,n(203)(e))},186:function(e,t,n){},211:function(e,t,n){},246:function(e,t){},312:function(e,t,n){},325:function(e,t,n){},356:function(e,t,n){},378:function(e,t){},432:function(e,t){},458:function(e,t){},508:function(e,t,n){},530:function(e,t,n){},531:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n(0),o=n.n(s),a=n(21),c=n.n(a),i=(n(312),n(10)),l=n(11),u=n(14),d=n(13),h=n(27),p=n(28),b=n(272),j=n.n(b),m=n(59);n(201);m.a.apps.length?m.a.app():m.a.initializeApp({apiKey:"AIzaSyDg4KHJi2J9BExIfX24bnlZtefNzvjxoMo",authDomain:"picasso-2a25e.firebaseapp.com",projectId:"picasso-2a25e",storageBucket:"picasso-2a25e.appspot.com",messagingSenderId:"473349610263",appId:"1:473349610263:web:3e3236947601122ee17552",measurementId:"G-4HV3JC920J"}),m.a.analytics();var O=m.a.firestore(),f=m.a.auth(),g=m.a.auth,x=m.a.storage().ref(),v=n(138);var w=function(){var e=Object(v.useLastLocation)();e=e?"#"+e.pathname:"#/home/";var t={signInFlow:"popup",signInOptions:[g.EmailAuthProvider.PROVIDER_ID],signInSuccessUrl:e};return null!==f.currentUser?Object(r.jsx)(p.c,{to:e}):(console.log("showing signin form"),Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{style:{visibility:"#/home/"===e?"hidden":"visible",textAlign:"center"},children:"Let's have you signed in and we'll take you to your book."}),Object(r.jsx)(j.a,{uiConfig:t,firebaseAuth:f})]}))},k=n.p+"static/media/Logo.d37141a7.svg",y=n.p+"static/media/Hero.82d2f637.svg",S=n(576),I=(n(325),n(274)),D=n.n(I),C=n(278),R=n.n(C),N=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).import=function(){r.setState({goToAddScreen:!0})},r._handleTextfieldChange=function(e){r.setState({documentLink:e.target.value})},r.state={documentLink:"",goToAddScreen:!1},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;if(this.state.goToAddScreen){var t=new RegExp("/document/d/([a-zA-Z0-9-_]+)").exec(this.state.documentLink)[1];return Object(r.jsx)(p.c,{to:"/add/"+t})}var n=Object(r.jsx)(R.a,{});return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{style:{background:"#E3F2FD",height:"600px"},children:[Object(r.jsxs)(S.a,{display:"flex",justifyContent:"center",className:"navbar",children:[Object(r.jsx)("img",{src:k})," "]}),Object(r.jsx)(S.a,{children:Object(r.jsxs)("h1",{id:"heading_line",children:["Publish beautiful, interactive textbooks",Object(r.jsx)("br",{}),"using only Google Docs."]})}),Object(r.jsx)(S.a,{display:"flex",justifyContent:"center",children:Object(r.jsx)(D.a,{value:this.state.documentLink,onChange:function(t){return e.setState({documentLink:t})},placeholder:"Your Google Doc link",searchIcon:n,closeIcon:n,style:{width:"25rem"},onRequestSearch:function(){e.import()},onCancelSearch:function(){e.import()}})}),Object(r.jsxs)(S.a,{display:"flex",justifyContent:"center",className:"navbar",children:[Object(r.jsx)("img",{src:y})," "]})]})})}}]),n}(s.Component),E=n(151),L=n(291),T=n(58),F=n(65),U=n.n(F),A=n(15),B=n.n(A),M=n(24),q=n(69),_=O.collection("users");function P(){return Q.apply(this,arguments)}function Q(){return(Q=Object(M.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(M.a)(B.a.mark((function e(t){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return n=_.doc(t.uid),e.prev=3,e.next=6,n.get();case 6:e.sent.exists||(r={displayName:t.displayName,booksOwned:[]},n.set(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("Error getting document:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}var J=o.a.createContext(),H=function(e){var t=e.children,n=Object(s.useState)(null),o=Object(T.a)(n,2),a=o[0],c=o[1],i=Object(s.useState)(!0),l=Object(T.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){f.onAuthStateChanged((function(e){console.log(e),c(e),d(!1),function(e){W.apply(this,arguments)}(e)}))}),[]),u?Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(r.jsx)(U.a,{color:"#1d85d2",type:"bars"})}):Object(r.jsx)(J.Provider,{value:{currentUser:a},children:t})},z=function(e){var t=e.component,n=Object(L.a)(e,["component"]),o=Object(s.useContext)(J).currentUser;return console.log(o),Object(r.jsx)(p.d,Object(E.a)(Object(E.a)({},n),{},{render:function(e){return o?Object(r.jsx)(t,Object(E.a)({},e)):Object(r.jsx)(p.c,{to:{pathname:"/signin/"}})}}))},G=n(45),V=(n(356),n(211),n.p+"static/media/logo.f5577065.svg"),K=n(205),Y=n.p+"static/media/bookmark_border.7ab6e61e.svg",Z=n.p+"static/media/note_add.deaa3c98.svg",X=n.p+"static/media/search.c49eb908.svg",$=n.p+"static/media/volume_up.f92f4a65.svg",ee=n(279),te=n.n(ee),ne=n(147);function re(e){if(null!==e){console.log(e);var t="https://docs.google.com/feeds/download/documents/export/Export?id="+e+"&exportFormat=html";console.log(t),fetch(t).then((function(e){return e.text()})).then((function(t){!function(e,t){var n=Object(ne.a)(e);console.log(n),function(e,t){var n=x.child("/books/"+t+".json"),r=JSON.stringify(e),s=new Blob([r],{type:"application/json"});n.put(s).then((function(e){console.log("Uploaded ",t,".json"),window.location.reload()}))}(n,t)}(t,e)})).catch(console.log)}}function se(){var e=new URL(window.location.href),t=e.hash.split("/")[2];console.log(e.hash),re(t)}var oe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"navbar_controls",children:[Object(r.jsx)(K.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(r.jsx)("img",{src:$,alt:"play audio button",onClick:function(e){e.preventDefault(),console.log("The link was clicked.")}})}),Object(r.jsx)(K.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(r.jsx)("img",{src:Y,alt:"bookmark button"})}),Object(r.jsx)(K.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(r.jsx)("img",{src:Z,alt:"add note button"})}),Object(r.jsx)(K.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(r.jsx)("img",{src:X,alt:"search button"})}),Object(r.jsx)(K.a,{"aria-label":"upload picture",component:"span",onClick:se,children:Object(r.jsx)(te.a,{})})]})}}]),n}(s.Component),ae=n(577),ce=n(565),ie=n(566),le=n(567),ue=n(568),de=n(564),he=n(152),pe=n(563),be=n(148),je=n.n(be),me=n(280),Oe=n(282),fe=n.n(Oe),ge=n(281),xe=n.n(ge),ve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).handleClickOutside=function(t){e.props.outsideClickHandler(t)},e.logout=function(){console.log("Logout"),f.signOut()},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.show?Object(r.jsx)("div",{style:{minWidth:"15rem",position:"fixed",top:"0",right:"0",margin:"5.5rem 2.8rem"},children:Object(r.jsxs)(pe.a,{children:[Object(r.jsxs)(he.a,{variant:"h6",align:"center",style:{marginTop:"1rem"},children:["Hi, ",f.currentUser.displayName||null,"!"]}),Object(r.jsx)(de.a,{}),Object(r.jsxs)(ce.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(r.jsx)(ie.a,{button:!0,onClick:this.import,children:Object(r.jsxs)(h.Link,{to:"/add",style:{display:"flex",textDecoration:"none",color:"black"},children:[Object(r.jsx)(le.a,{children:Object(r.jsx)(xe.a,{})}),Object(r.jsx)(ue.a,{primary:"Import"})]})}),Object(r.jsx)(ie.a,{button:!0,onClick:this.import,children:Object(r.jsxs)(h.Link,{to:"/dashboard",style:{display:"flex",textDecoration:"none",color:"black"},children:[Object(r.jsx)(le.a,{children:Object(r.jsx)(je.a,{})}),Object(r.jsx)(ue.a,{primary:"Dashboard"})]})}),Object(r.jsxs)(ie.a,{button:!0,onClick:this.logout,children:[Object(r.jsx)(le.a,{children:Object(r.jsx)(fe.a,{})}),Object(r.jsx)(ue.a,{primary:"Logout"})]})]})]})}):null}}]),n}(s.Component),we=Object(me.a)(ve),ke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).preventDragHandler=function(e){e.preventDefault()},r.avatarClicked=function(){console.log("Avatar clicked."),r.setState({showAccountInformation:!r.state.showAccountInformation})},r.clickedOutsideHandler=function(e){"avatar_btn"!==e.target.id&&(console.log("clicked outside",e),r.setState({showAccountInformation:!1}))},r.state={showAccountInformation:!1},r}return Object(l.a)(n,[{key:"render",value:function(){var e=f.currentUser.displayName||"";return Object(r.jsxs)("div",{onDragStart:this.preventDragHandler,children:[Object(r.jsxs)("div",{className:"navbar",children:[Object(r.jsx)("img",{src:V,height:"50rem",alt:"company logo"}),Object(r.jsx)(oe,{}),Object(r.jsx)(K.a,{onClick:this.avatarClicked,children:Object(r.jsx)(ae.a,{className:"avatar",id:"avatar_btn",children:e.charAt(0).toUpperCase()||null})})]}),Object(r.jsx)(we,{show:this.state.showAccountInformation,outsideClickHandler:this.clickedOutsideHandler})]})}}]),n}(s.Component),ye=n(93),Se=(n.p,n(569)),Ie=n(12),De=n(578),Ce=n(579),Re=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.book.chapters,s=[],o=Object(Ie.a)({root:{borderRadius:"0",fontSize:"1rem",fontWeight:"400",padding:"0",borderBottomRightRadius:"3rem",borderTopRightRadius:"3rem"},label:{textTransform:"none"}})(Se.a),a=Object(ye.a)(n.entries());try{var c=function(){var n=Object(T.a)(e.value,2),a=n[0],c=n[1];s.push(Object(r.jsx)(o,{onClick:function(){return t.props.handler(a)},children:Object(r.jsx)(Ne,{name:c.name,isBookmarked:c.isBookmarked,isSelected:a===t.props.currentSelectedChapter,index:a})},a))};for(a.s();!(e=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return Object(r.jsx)("div",{style:{marginTop:"3rem",display:"inline-flex",flexDirection:"column",position:"fixed",height:"82vh",overflow:"auto","overflow-x":"hidden"},children:s})}}]),n}(s.Component),Ne=function(e){e.isBookmarked;var t=e.name.trim(),n=e.isSelected,s={width:"13rem",height:"3.5rem",paddingLeft:"1.5rem",paddingRight:"1rem",display:"inline-flex",alignItems:"center",backgroundColor:n?"#E3F2FD":"",borderBottomRightRadius:"3rem",borderTopRightRadius:"3rem",color:n?"#2196F3":"black",fontWeight:"500"},o=Object(Ie.a)((function(e){return{tooltip:{fontSize:e.typography.pxToRem(12)}}}))(De.a),a={marginRight:"0.5rem",color:n?"white":"black",backgroundColor:n?"#2196F3":""};return Object(r.jsx)(o,{title:t,arrow:!0,placement:"right",children:Object(r.jsxs)("div",{style:s,children:[Object(r.jsx)(Ce.a,{size:"small",label:e.index+1,style:a,variant:n?"default":"outlined"}),Object(r.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t})]})})},Ee=n(113),Le=n.n(Ee),Te=n(284),Fe=n.n(Te),Ue=(n(508),n(285)),Ae=n.n(Ue),Be=n(574),Me=n(48),qe=(n(186),n(562)),_e=O.collection("answers");function Pe(e,t,n,r,s){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(M.a)(B.a.mark((function e(t,n,r,s,o){var a,c,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_e.where("studentID","==",t).where("chapterNumber","==",parseInt(r)).where("questionNumber","==",parseInt(s)).where("bookID","==",n).where("type","==",o),e.next=3,a.get();case 3:if((c=e.sent).empty){e.next=7;break}return i=c.docs[0],e.abrupt("return",i);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t,n,r,s,o){try{return _e.add({studentID:t,chapterNumber:parseInt(r),questionNumber:parseInt(s),response:e,type:o,bookID:n})}catch(a){console.error("Error adding answer: ",a)}}function Je(e,t,n,r,s,o){return He.apply(this,arguments)}function He(){return(He=Object(M.a)(B.a.mark((function e(t,n,r,s,o,a){var c,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=!1,e.next=4,Pe(n,r,s,o,a);case 4:return(i=e.sent)&&(i.ref.update({response:t}),c=!0),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.error("Error updating answer: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ze(e,t,n,r,s,o){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(M.a)(B.a.mark((function e(t,n,r,s,o,a){var c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(t,n,r,s,o,a);case 2:if(e.sent){e.next=10;break}return e.next=6,We(t,n,r,s,o,a);case 6:c=e.sent,console.log("New answer recorded with ID: ",c.id),e.next=11;break;case 10:console.log("Response updated");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(M.a)(B.a.mark((function e(t){var n,r,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_e.where("bookID","==",t),r=Object(q.a)(n,"id"),e.next=4,Ze();case 4:return s=e.sent,e.abrupt("return",r.pipe(Object(qe.a)((function(e){return Ye(e=e.map((function(e){return e.student=s.find((function(t){return t.id==e.studentID})).name,e}))),e}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){e.sort((function(e,t){return e.questionNumber>t.questionNumber?1:-1})),e.sort((function(e,t){return e.chapterNumber<t.chapterNumber?1:-1})),e.sort((function(e,t){return e.student.toUpperCase()>t.student.toUpperCase()?1:-1}))}function Ze(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(M.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,P();case 3:return e.sent.forEach((function(e){return t.push({id:e.id,name:e.data().displayName})})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).saveResponse=function(){""!=r.state.response?(r.saveToFirebase(),r.setState({hasResponded:!0})):console.log("BLANK")},r.onEdit=function(){r.setState({oldResponse:r.state.response}),r.setState({hasResponded:!1})},r.onChangeResponse=function(e){console.log("onChangeResponse"),r.setState({response:e.target.value})},r.loadFirebaseResponse=function(){var e=Object(G.a)(r);Pe(f.currentUser.uid,r.props.bookID,r.props.chapterNumber,r.props.questionNumber,"RESPONSE_QUESTION").then((function(t){e.setState({response:t.data().response}),e.setState({hasResponded:!0}),e.setState({dirty:!0})})).catch((function(e){console.error("Error setting state: ",e)}))},r.saveToFirebase=function(){ze(r.state.response,f.currentUser.uid,r.props.bookID,r.props.chapterNumber,r.props.questionNumber,"RESPONSE_QUESTION")},r.cancelEdit=function(){r.setState({response:r.state.oldResponse}),r.setState({hasResponded:!0})},r.state={hasResponded:!1,response:"",oldResponse:"",needsFirebaseLoading:!0,dirty:!1},r}return Object(l.a)(n,[{key:"render",value:function(){this.state.needsFirebaseLoading&&(this.loadFirebaseResponse(),this.setState({needsFirebaseLoading:!1}));var e=this.props.questionText,t=Object(r.jsx)(S.a,{className:"responseQuestionBox",boxShadow:2,children:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsx)("p",{className:"p-no-margin",children:Object(r.jsx)("b",{children:e[1].trim()})}),Object(r.jsx)(Be.a,{style:{width:"100%",marginBottom:"1rem",marginTop:"1rem"},label:"Response",multiline:!0,onChange:this.onChangeResponse,defaultValue:this.state.response}),Object(r.jsxs)("div",{children:[Object(r.jsx)(Se.a,{variant:"contained",color:"primary",style:{float:"right"},onClick:this.saveResponse,children:"RESPOND"}),Object(r.jsx)(Se.a,{variant:"contained",color:"delete",style:{float:"right",marginRight:"1rem",visibility:this.state.dirty?"visible":"hidden"},onClick:this.cancelEdit,children:"Cancel"})]})]})}),n=Object(r.jsx)(S.a,{className:"responseQuestionBox",boxShadow:2,children:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsx)("p",{className:"p-no-margin",children:Object(r.jsx)("b",{children:e[1].trim()})}),Object(r.jsx)(de.a,{}),Object(r.jsx)("p",{className:"p-no-margin",children:this.state.response}),Object(r.jsx)("div",{style:{float:"right"},children:Object(r.jsx)(Se.a,{variant:"contained",onClick:this.onEdit,children:"EDIT"})})]})});return this.state.hasResponded?n:t}}]),n}(s.Component),et=n(286),tt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).saveResponse=function(e){""!==e?r.saveToFirebase(e):console.log("BLANK")},r.onEdit=function(){r.setState({oldResponse:r.state.response}),r.setState({hasResponded:!1})},r.onChangeResponse=function(e){console.log("onChangeResponse",e),r.setState({response:e}),r.saveResponse(e)},r.loadFirebaseResponse=function(){var e=Object(G.a)(r);Pe(f.currentUser.uid,r.props.bookID,r.props.chapterNumber,r.props.questionNumber,"TRUE_OR_FALSE").then((function(t){e.setState({response:t.data().response}),e.setState({hasResponded:!0})})).catch((function(e){console.error("Error updating answer: ",e)}))},r.saveToFirebase=function(e){ze(e,f.currentUser.uid,r.props.bookID,r.props.chapterNumber,r.props.questionNumber,"TRUE_OR_FALSE")},r.cancelEdit=function(){r.setState({response:r.state.oldResponse}),r.setState({hasResponded:!0})},r.state={hasResponded:!1,response:"",needsFirebaseLoading:!0,error:!1},r}return Object(l.a)(n,[{key:"render",value:function(){if(this.state.error)return Object(r.jsx)("div",{children:"ERROR RENDERING QUESTION. Please contact us."});this.state.needsFirebaseLoading&&(this.loadFirebaseResponse(),this.setState({needsFirebaseLoading:!1}));var e=this.props.questionText,t=e[1].split(">")[0].trim(),n=e[1].split(">")[1].trim().toUpperCase();return this.state.hasResponded?Object(r.jsx)(S.a,{className:"responseQuestionBox",boxShadow:2,children:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsx)("p",{className:"p-no-margin",children:Object(r.jsx)("b",{children:t})}),Object(r.jsx)("div",{style:{marginTop:"2rem",borderWidth:"2px"},children:Object(r.jsxs)(Me.RadioGroup,{onChange:this.onChangeResponse,value:this.state.response,horizontal:!0,children:[Object(r.jsx)(Me.RadioButton,{value:"TRUE",rootColor:"black",pointColor:"TRUE"===n?"green":"red",children:Object(r.jsx)("b",{children:"TRUE"})}),Object(r.jsx)(Me.RadioButton,{value:"FALSE",rootColor:"black",pointColor:"FALSE"===n?"green":"red",children:Object(r.jsx)("b",{children:"FALSE"})})]})})]})}):Object(r.jsx)(S.a,{className:"responseQuestionBox",boxShadow:2,children:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsx)("p",{className:"p-no-margin",children:Object(r.jsx)("b",{children:t})}),Object(r.jsx)("div",{style:{marginTop:"2rem",borderWidth:"2px"},children:Object(r.jsxs)(Me.RadioGroup,{onChange:this.onChangeResponse,horizontal:!0,children:[Object(r.jsx)(Me.RadioButton,{value:"TRUE",rootColor:"black",pointColor:"TRUE"===n?"green":"red",children:Object(r.jsx)("b",{children:"TRUE"})}),Object(r.jsx)(Me.RadioButton,{value:"FALSE",rootColor:"black",pointColor:"FALSE"===n?"green":"red",children:Object(r.jsx)("b",{children:"FALSE"})})]})})]})})}}]),n}(s.Component),nt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;Object(i.a)(this,n),(s=t.call(this,e)).saveResponse=function(e){""!==e?s.saveToFirebase(e):console.log("BLANK")},s.onEdit=function(){s.setState({oldResponse:s.state.response}),s.setState({hasResponded:!1})},s.onChangeResponse=function(e){console.log("onChangeResponse",e),s.setState({response:e}),s.saveResponse(e)},s.loadFirebaseResponse=function(){var e=Object(G.a)(s);Pe(f.currentUser.uid,s.props.bookID,s.props.chapterNumber,s.props.questionNumber,"MULTIPLE_CHOICE").then((function(t){e.setState({response:t.data().response}),e.setState({hasResponded:!0})})).catch((function(e){console.error("Error updating answer: ",e)}))},s.saveToFirebase=function(e){ze(e,f.currentUser.uid,s.props.bookID,s.props.chapterNumber,s.props.questionNumber,"MULTIPLE_CHOICE")};var o,a=s.props.questionText,c=a[1].split(">")[0].trim(),l=a[1].split(">").slice(1,a[1].split(">").length-1),u=parseInt(a[1].split(">")[a[1].split(">").length-1].trim()),d=[],h=Object(ye.a)(l.entries());try{for(h.s();!(o=h.n()).done;){var p=Object(T.a)(o.value,2),b=p[0],j=p[1];d.push(Object(r.jsxs)(Me.RadioButton,{value:b+1,rootColor:"black",pointColor:u===b+1?"green":"red",children:[" ",j.trim()," "]},b))}}catch(m){h.e(m)}finally{h.f()}return s.state={hasResponded:!1,response:"",needsFirebaseLoading:!0,error:!1,question:c,items:d,choicesArray:l},s}return Object(l.a)(n,[{key:"render",value:function(){if(this.state.error)return Object(r.jsx)("div",{children:"ERROR RENDERING QUESTION. Please contact us."});this.state.needsFirebaseLoading&&(this.loadFirebaseResponse(),this.setState({needsFirebaseLoading:!1}));var e=this.state.question,t=this.state.items;return this.state.hasResponded?Object(r.jsx)(S.a,{className:"responseQuestionBox",boxShadow:2,children:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsx)("p",{className:"p-no-margin",children:Object(r.jsx)("b",{children:e})}),Object(r.jsx)("div",{style:{marginTop:"2rem",borderWidth:"2px"},children:Object(r.jsx)(Me.RadioGroup,{onChange:this.onChangeResponse,value:this.state.response,vertical:!0,children:t.map((function(e){return e}))})})]})}):Object(r.jsx)(S.a,{className:"responseQuestionBox",boxShadow:2,children:Object(r.jsxs)("div",{style:{width:"100%"},children:[Object(r.jsx)("p",{className:"p-no-margin",children:Object(r.jsx)("b",{children:e})}),Object(r.jsx)("div",{style:{marginTop:"2rem",borderWidth:"2px"},children:Object(r.jsx)(Me.RadioGroup,{onChange:this.onChangeResponse,vertical:!0,children:t.map((function(e){return e}))})})]})})}}]),n}(s.Component),rt=(new Ae.a,n(231),null),st=null,ot=null;function at(e,t){if(null===e)return!1;if(void 0===e.children)return!1;for(var n=0;n<e.children.length;n++){if(e.children[n].name===t)return!0;if(!0===at(e.children[n],t))return!0}return!1}function ct(e,t){if("tag"===e.type&&e.name.startsWith("h")&&!lt(e,String()).trim())return null;if("tag"===e.type&&"img"===e.name)return console.log("IMG FOUND"),Object(r.jsx)("img",{src:e.attribs.src,className:"chapter_img",alt:"chapter_img"});if("tag"===e.type&&"span"===e.name)return console.log("SPAN FOUND",e),e.attribs.style=null,Object(Ee.convertNodeToElement)(e,t,ct);if("tag"===e.type&&"p"===e.name){console.log("P FOUND",e);var n=lt(e,String());if(console.log(at(e,"img")),!n.trim()&&!at(e,"img"))return null;if(n.startsWith("RESPONSE_QUESTION")){var s=n.split(":");return Object(r.jsx)($e,{questionNumber:st++,chapterNumber:rt,questionText:s,bookID:ot})}if(n.startsWith("TRUE_OR_FALSE")){var o=n.split(":");return Object(r.jsx)(tt,{questionNumber:st++,chapterNumber:rt,questionText:o,bookID:ot})}if(n.startsWith("MULTIPLE_CHOICE")){var a=n.split(":");return Object(r.jsx)(nt,{questionNumber:st++,chapterNumber:rt,questionText:a,bookID:ot})}return"tag"===e.type&&"a"===e.name?(e.attribs.target="_blank",Object(Ee.convertNodeToElement)(e,t,ct)):n.startsWith("VIDEO_LINK")?Object(r.jsx)(S.a,{display:"flex",justifyContent:"center",children:Object(r.jsx)(Fe.a,{url:it(n)})}):Object(Ee.convertNodeToElement)(e,t,ct)}}function it(e){return e.replace(/(https?:\/\/[^\s]+)/g,(function(e){return e}))}function lt(e,t){if("text"===e.type)return e.data;for(var n in e.children){var r=t.concat(lt(e.children[n],String()));t=r}return t}var ut=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).updateChapterNumberAndResetQuestionID(e.chapterNumber),ot=r.props.bookID,console.log(e.html),r}return Object(l.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.updateChapterNumberAndResetQuestionID(e.chapterNumber)}},{key:"updateChapterNumberAndResetQuestionID",value:function(e){st=1,rt=e}},{key:"render",value:function(){console.log("Chapter Number",rt),console.log("STYLE ",this.props.style);var e="<html>"+this.props.style+this.props.html+"</html>";return Object(r.jsxs)("div",{style:{width:"55%",margin:"0 auto"},children:[Le()(e,{transform:ct}),Object(r.jsx)(et.a.Embed,{websiteId:2736,id:this.props.bookID+"CHAPTER"+rt},rt)]})}}]),n}(s.Component),dt=n(287),ht=n.n(dt),pt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).downloadJSON=function(e){var t=x.child("books/"+e+".json"),n=Object(G.a)(r);t.getDownloadURL().then((function(e){console.log("Downloading...");var t=new XMLHttpRequest;t.responseType="blob",t.onload=function(e){t.response.text().then((function(e){n.setState({bookJSON:JSON.parse(e),downloadSuccessful:!0})}))},t.withCredentials=!1,t.open("GET",e),t.send()})).catch((function(e){e.code}))},r.onSidebarClick=function(e){window.scrollTo(0,0),r.updateJsonInFirebase(),r.setState({currentChapter:e})},r.updateJsonInFirebase=function(){console.log("TODO: Implement firebase JSON update.")},r.state={downloadSuccessful:!1,currentChapter:0,bookID:r.props.match.params.bookID,bookJSON:null},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.downloadJSON(this.state.bookID),console.log("BOOK ID",this.state.bookID)}},{key:"render",value:function(){if(this.state.downloadSuccessful){var e=this.state.bookJSON;return console.log(e),Object(r.jsxs)("div",{children:[Object(r.jsx)(ht.a,{height:"4px",bgcolor:"#1d85d2"}),Object(r.jsx)(ke,{}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(r.jsx)(Re,{handler:this.onSidebarClick,currentSelectedChapter:this.state.currentChapter,book:e.book}),Object(r.jsx)(ut,{html:e.book.chapters[this.state.currentChapter].page.html,style:e.book.style,chapterNumber:this.state.currentChapter,bookID:this.state.bookID})]})]})}return Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(r.jsx)(U.a,{color:"#1d85d2",type:"bars"})})}}]),n}(s.Component),bt=O.collection("books");function jt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(M.a)(B.a.mark((function e(t,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(t,n);case 2:return e.next=4,Ot(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e){var t=bt.doc(e.toString());t.get().then((function(e){e.exists||t.set({title:"How to be a Software Engineer",author:"Sahas",author_uid:f.currentUser.uid,price:0,summary:"Summary of the book!"}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))}))}function ft(e,t){return gt.apply(this,arguments)}function gt(){return(gt=Object(M.a)(B.a.mark((function e(t,n){var r,s,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.child("/books/"+n+".json"),s=JSON.stringify(t),o=new Blob([s],{type:"application/json"}),e.prev=3,e.next=6,r.put(o);case 6:console.log("Uploaded ",n,".json"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("Error Storing Textbook:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function xt(e){var t=bt.doc(e);return Object(q.b)(t,"id")}var vt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).import=function(){if(""!==r.state.documentLink){var e=new RegExp("/document/d/([a-zA-Z0-9-_]+)").exec(r.state.documentLink)[1];console.log(e),r.setState({bookID:e,pending:!0});var t="https://docs.google.com/feeds/download/documents/export/Export?id="+e+"&exportFormat=html";console.log(t),fetch(t).then((function(e){return e.text()})).then((function(e){r.conversion(e)})).catch(console.log)}},r.conversion=function(){var e=Object(M.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(ne.a)(t),console.log(n),e.prev=2,e.next=5,jt(n,r.state.bookID);case 5:r.setState({importSuccessful:!0,pending:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("Error converting textbook:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r._handleTextfieldChange=function(e){r.setState({documentLink:e.target.value})},r.state={importSuccessful:!1,bookID:"",documentLink:"",pending:!1},console.log(r.props.match.params.bookID),r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log("PROPS",this.props),this.props.match&&console.log(this.props.match.params.bookID),this.state.importSuccessful?Object(r.jsx)(p.c,{to:"../read/"+this.state.bookID}):this.state.pending?Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(r.jsx)(U.a,{color:"#1d85d2",type:"bars"})}):this.props.match.params.bookID?(this.setState({documentLink:"https://docs.google.com/document/d/"+this.props.match.params.bookID}),this.import(),Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(r.jsx)(U.a,{color:"#1d85d2",type:"bars"})})):Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{style:{textAlign:"center"},children:"What's your Google Doc link?"}),Object(r.jsxs)(S.a,{display:"flex",justifyContent:"center",children:[Object(r.jsx)(Be.a,{id:"outlined-basic",placeholder:"https://docs.google.com/document/...",variant:"outlined",style:{width:"40rem"},onChange:this._handleTextfieldChange}),Object(r.jsx)(Se.a,{type:"submit",color:"primary",onClick:function(){e.import()},children:"IMPORT"})]})]})}}]),n}(o.a.Component),wt=n(571),kt=n(573),yt=n(572),St=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).getBookMetaData=function(e){r.textbookSubscription=xt(e).subscribe((function(e){e?r.setState({bookMetaData:e,isStillLoading:!1}):console.log("No such document!")}))},r.state={bookMetaData:null,isStillLoading:!0,needsFirebaseLoading:!0},r}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.textbookSubscription.unsubscribe()}},{key:"render",value:function(){var e=this;this.state.needsFirebaseLoading&&(this.getBookMetaData(this.props.bookID),this.setState({needsFirebaseLoading:!1}));return this.state.isStillLoading?Object(r.jsx)("div",{}):Object(r.jsxs)(pe.a,{style:{maxWidth:345},children:[Object(r.jsxs)(wt.a,{children:[Object(r.jsx)(yt.a,{style:{height:200},image:"https://markmanson.net/wp-content/uploads/2020/03/subtle-art-everything-is-fcked-combo.jpg",title:this.state.bookMetaData.title}),Object(r.jsxs)(kt.a,{children:[Object(r.jsx)(he.a,{gutterBottom:!0,variant:"h5",children:this.state.bookMetaData.title}),Object(r.jsx)(he.a,{variant:"body2",color:"textSecondary",component:"p",children:this.state.bookMetaData.summary})]})]}),Object(r.jsx)(S.a,{display:"flex",alignItems:"center",justifyContent:"space-between",style:{padding:"10px"},children:Object(r.jsx)(Se.a,{size:"small",color:"primary",onClick:function(){return e.props.handler(e.props.bookID)},children:"Get this book"})})]})}}]),n}(o.a.Component),It=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).getBookList=function(){r.textbookSubscription=Object(q.a)(bt,"id").subscribe((function(e){r.setState({bookList:e})}))},r.handler=function(e){console.log(e),r.setState({redirect:!0,bookIDChosen:e})},r.state={needToFetch:!0,bookList:[],redirect:!1,bookIDChosen:null},r}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.textbookSubscription.unsubscribe()}},{key:"render",value:function(){var e=this;if(this.state.redirect)return Object(r.jsx)(p.c,{to:"/book/buy/"+this.state.bookIDChosen});this.state.needToFetch&&(this.getBookList(),this.setState({needToFetch:!1}));return Object(r.jsx)(S.a,{style:{margin:"4rem"},display:"flex",children:this.state.bookList.map((function(t){return Object(r.jsx)(St,{bookID:t.id,handler:e.handler},t.id)}))})}}]),n}(s.Component),Dt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{style:{marginTop:"3rem",display:"inline-flex",flexDirection:"column",position:"fixed",height:"82vh",overflow:"auto","overflow-x":"hidden"},children:Object(r.jsx)("button",{style:{width:"150px",height:"35px",backgroundColor:"blue"},children:Object(r.jsxs)(h.Link,{to:"/home",style:{display:"flex",textDecoration:"none",color:"black"},children:[Object(r.jsx)(le.a,{children:Object(r.jsx)(je.a,{})}),Object(r.jsx)(ue.a,{primary:"Home"})]})})})}}]),n}(s.Component),Ct=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(M.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.module;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("td",{children:Object(r.jsx)(h.Link,{to:"".concat(this.props.location.pathname,"/module/").concat(e.id),children:Object(r.jsx)("div",{children:e.title})})}),Object(r.jsx)("td",{children:e.avgScore})]})}}]),n}(s.Component),Rt=Object(p.o)(Ct),Nt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.modules;return e=t.student?Object(r.jsx)("th",{children:"Score"}):Object(r.jsx)("th",{children:"Avg Score"}),Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("h2",{children:"ModuleList Works"}),Object(r.jsx)("p",{children:"Todo: Add Css/Styling using Material-UI"}),Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Module Name"}),e]})}),Object(r.jsx)("tbody",{children:n.map((function(e){return Object(r.jsx)("tr",{children:Object(r.jsx)(Rt,{module:e})})}))})]})]})}}]),n}(s.Component),Et=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.student,t=e.id,n=e.studentPicURL,s=e.name,a=e.progress,c=e.score;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("td",{children:Object(r.jsx)(h.Link,{to:"".concat(this.props.location.pathname,"/student/").concat(t),children:Object(r.jsx)("img",{src:n,alt:"student's picture"})})}),Object(r.jsx)("td",{children:Object(r.jsx)(h.Link,{to:"".concat(this.props.location.pathname,"/student/").concat(t),children:Object(r.jsx)("div",{children:s})})}),Object(r.jsx)("td",{children:a}),Object(r.jsx)("td",{children:c})]})}}]),n}(s.Component),Lt=Object(p.o)(Et),Tt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.students;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("h2",{children:"StudentList Works"}),Object(r.jsx)("p",{children:" Also needs appropriate Css"}),Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Student Picture"}),Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Progress"}),Object(r.jsx)("th",{children:"Score"})]})}),Object(r.jsx)("tbody",{children:e.map((function(e){return Object(r.jsx)("tr",{children:Object(r.jsx)(Lt,{student:e})})}))})]})]})}}]),n}(s.Component),Ft=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.classInfo,t=this.props.match.params.classID;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("h1",{children:"Home Works"}),Object(r.jsxs)("p",{children:["Class ID: ",t]}),Object(r.jsx)(Nt,{modules:e.modules}),Object(r.jsx)(Tt,{students:e.students})]})}}]),n}(s.Component),Ut=Object(p.o)(Ft),At=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(M.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.module,t=e.id,n=e.title,s=e.avgScore;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("h1",{children:"Module View Works"}),Object(r.jsxs)("p",{children:["ID: ",t]}),Object(r.jsxs)("p",{children:["Module Name: ",n]}),Object(r.jsxs)("p",{children:["Average Score: ",s," "]})]})}}]),n}(s.Component),Bt=Object(p.o)(At),Mt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.student,n=e.modules,s=t.id,a=t.studentPicURL,c=t.name,i=t.progress,l=t.score;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("h1",{children:"Student View Works!"}),Object(r.jsxs)("p",{children:["id: ",s]}),Object(r.jsxs)("p",{children:["pic URL: ",a]}),Object(r.jsxs)("p",{children:["name: ",c]}),Object(r.jsxs)("p",{children:["progress: ",i]}),Object(r.jsxs)("p",{children:["score: ",l]}),Object(r.jsx)(Nt,{modules:n,student:t})]})}}]),n}(s.Component),qt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.module,n=e.student;return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("h1",{children:"StudenModuleView works!"}),Object(r.jsx)("img",{src:n.studentPicURL,alt:"student's picture"}),Object(r.jsxs)("h2",{children:["This is ",n.name,"'s ",t.title," performance"]})]})}}]),n}(s.Component),_t=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).onSidebarClick=function(e){r.updateJsonInFirebase(),r.setState({currentChapter:e})},r.updateJsonInFirebase=function(){console.log("TODO: Implement firebase JSON update.")},r.state={classInfo:{modules:[{id:"adsg87gs8adgsduias",title:"module1",avgScore:83,questions:[{prompt:"Question 1",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"wrong answer 3",d:"right answer"},responses:[{student:"thxnathanlol420xD",answer:"wrong answer 3"},{student:"3i5ubv3o5uvhbo35",answer:"right answer"},{student:"9083g6780g3ggbfd",answer:"wrong answer 2"}]},{prompt:"Question 2",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"right answer",d:"wrong answer 3"},responses:[{student:"thxnathanlol420xD",answer:"wrong answer 2"},{student:"3i5ubv3o5uvhbo35",answer:"wrong answer 1"},{student:"9083g6780g3ggbfd",answer:"wrong answer 2"}]},{prompt:"Question 3",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"right answer",d:"wrong answer 3"},responses:[{student:"thxnathanlol420xD",answer:"right answer"},{student:"3i5ubv3o5uvhbo35",answer:"wrong answer 1"},{student:"9083g6780g3ggbfd",answer:"right answer"}]}]},{id:"ngijf74hngkfjd93h",title:"module2",avgScore:95,questions:[{prompt:"Question 1",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"wrong answer 3",d:"right answer"},responses:[{student:"thxnathanlol420xD",answer:"wrong answer 3"},{student:"3i5ubv3o5uvhbo35",answer:"right answer"},{student:"9083g6780g3ggbfd",answer:"wrong answer 2"}]},{prompt:"Question 2",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"right answer",d:"wrong answer 3"},responses:[{student:"thxnathanlol420xD",answer:"wrong answer 2"},{student:"3i5ubv3o5uvhbo35",answer:"wrong answer 1"},{student:"9083g6780g3ggbfd",answer:"wrong answer 2"}]},{prompt:"Question 3",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"right answer",d:"wrong answer 3"},responses:[{student:"thxnathanlol420xD",answer:"right answer"},{student:"3i5ubv3o5uvhbo35",answer:"wrong answer 1"},{student:"9083g6780g3ggbfd",answer:"right answer"}]}]},{id:"fnksdjnfjb94jbwi4um4",title:"module3",avgScore:72,questions:[{prompt:"Question 1",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"wrong answer 3",d:"right answer"},responses:[{student:"thxnathanlol420xD",answer:"wrong answer 3"},{student:"3i5ubv3o5uvhbo35",answer:"right answer"},{student:"9083g6780g3ggbfd",answer:"wrong answer 2"}]},{prompt:"Question 2",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"right answer",d:"wrong answer 3"},responses:[{student:"thxnathanlol420xD",answer:"wrong answer 2"},{student:"3i5ubv3o5uvhbo35",answer:"wrong answer 1"},{student:"9083g6780g3ggbfd",answer:"wrong answer 2"}]},{prompt:"Question 3",choices:{a:"wrong answer 1",b:"wrong answer 2",c:"right answer",d:"wrong answer 3"},responses:[{student:"thxnathanlol420xD",answer:"right answer"},{student:"3i5ubv3o5uvhbo35",answer:"wrong answer 1"},{student:"9083g6780g3ggbfd",answer:"right answer"}]}]}],students:[{id:"thxnathanlol420xD",studentPicURL:"https://b.thumbs.redditmedia.com/bZedgr0gq7RQBBnVYVc-Nmzdr-5vEUg4Dj8nTrMb7yA.png",name:"Jeff Schmeff",progress:"25%",score:"90%",modules:[]},{id:"3i5ubv3o5uvhbo35",studentPicURL:"https://b.thumbs.redditmedia.com/bZedgr0gq7RQBBnVYVc-Nmzdr-5vEUg4Dj8nTrMb7yA.png",name:"John Doe",progress:"12%",score:"100%"},{id:"9083g6780g3ggbfd",studentPicURL:"https://b.thumbs.redditmedia.com/bZedgr0gq7RQBBnVYVc-Nmzdr-5vEUg4Dj8nTrMb7yA.png",name:"Donsly Jarecky",progress:"78%",score:"3%"}]}},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(M.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"dashboard-container",children:[Object(r.jsx)(h.Link,{to:"/dashboard/".concat(this.props.match.params.classID),children:Object(r.jsx)("h1",{children:"Class Dashboard"})}),Object(r.jsxs)(p.g,{children:[Object(r.jsx)(p.d,{exact:!0,path:"/dashboard/:classID",classInfo:this.state.classInfo,children:Object(r.jsx)(Ut,{classInfo:this.state.classInfo})}),Object(r.jsx)(p.d,{exact:!0,path:"/dashboard/:classID/module/:moduleID",render:function(t){var n=t.match.params.moduleID,s=e.getModuleById(n);return Object(r.jsx)(Bt,{module:s})}}),Object(r.jsx)(p.d,{exact:!0,path:"/dashboard/:classID/student/:studentID",render:function(t){var n=t.match.params.studentID,s=e.getStudentById(n);return Object(r.jsx)(Mt,{student:s,modules:e.state.classInfo.modules})}}),Object(r.jsx)(p.d,{exact:!0,path:"/dashboard/:classID/student/:studentID/module/:moduleID",render:function(t){var n=t.match.params.moduleID,s=t.match.params.studentID,o=e.getModuleById(n),a=e.getStudentById(s);return Object(r.jsx)(qt,{module:o,student:a})}})]}),Object(r.jsx)(Dt,{handler:this.onSidebarClick})]})}},{key:"getModuleById",value:function(e){return this.state.classInfo.modules.find((function(t){return t.id===e}))}},{key:"getStudentById",value:function(e){return this.state.classInfo.students.find((function(t){return t.id===e}))}}]),n}(s.Component),Pt=n(288),Qt=n(289),Wt=(n(530),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).handleClick=function(){var e=Object(M.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({sendState:"loading"}),n=Object(G.a)(r),e.next=4,O.collection("customers").doc(f.currentUser.uid).collection("checkout_sessions").add({price:"price_1ITx38I7w6vzg9yGwSggqiO0",success_url:window.location.origin+"/picasso/#/read/"+n.props.bookID,cancel_url:window.location.origin+"/picasso/#/paymentFailed/"});case 4:e.sent.onSnapshot(function(){var e=Object(M.a)(B.a.mark((function e(t){var n,s,o,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),s=n.error,o=n.sessionId,s&&alert("An error occured: ".concat(s.message)),!o){e.next=8;break}return e.next=5,Object(Pt.a)("pk_live_51I206fI7w6vzg9yGXHSlq83Uc5cTj9TlQhMiDw6JRLPiJN2wVxm8HxYv0DRzaN7Fm4uNQpCrP9QAPBlzpMxvbDHz004Lmwr0m2");case 5:a=e.sent,r.setState({sendState:""}),a.redirectToCheckout({sessionId:o});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={sendState:""},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=function(t){var n=t.handleClick;return Object(r.jsx)("section",{children:Object(r.jsxs)(S.a,{display:"flex",className:"product",children:[Object(r.jsx)("img",{src:"https://i.imgur.com/4W5UDlV.png",className:"bookCover"}),Object(r.jsxs)("div",{className:"description",children:[Object(r.jsx)("h3",{id:"bookTitle",children:"Construction Methods"}),Object(r.jsxs)("p",{children:[Object(r.jsx)("i",{children:"by"})," Austin Marshall"," "]}),Object(r.jsx)("p",{children:"About five years after I listened to some great communication at what was called the Woodstock Music Festival in upstate New York, I somehow graduated and I ended up on a construction project right out of school not knowing much of anything. My job was to document soil and groundwater conditions for the purpose of tunnel design and construction. One of the details in the soil work involved noticing and documenting the presence of methane gas, an explosive hazard."}),Object(r.jsx)("h5",{id:"price",children:"$25.00/month"}),Object(r.jsx)(Qt.Beetle,{color:"primary",variant:"contained",onClick:n,state:e.state.sendState,children:"Pay now"})]})]})})};return Object(r.jsx)(t,{handleClick:this.handleClick})}}]),n}(o.a.Component)),Jt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).fetchDetails=function(){r.textbookSubscription=xt(r.state.bookID).subscribe((function(e){e?r.setState({bookData:e,isStillLoading:!1}):console.log("No such document!")}))},r.state={bookID:r.props.match?r.props.match.params.bookID:null,bookData:null,needsFetching:!0},r}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.textbookSubscription.unsubscribe()}},{key:"render",value:function(){return this.state.needsFetching&&(this.fetchDetails(),this.setState({needsFetching:!1})),Object(r.jsx)(Wt,{bookID:this.props.match.params.bookID})}}]),n}(o.a.Component),Ht=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{children:["We're not sure what happened but that didn't work. That's all we know. Go to ",Object(r.jsx)("a",{href:"/picasso/",children:"Home"})]})}}]),n}(o.a.Component),zt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={responses:[]},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(M.a)(B.a.mark((function e(){var t,n=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(this.props.match.params.bookID);case 2:t=e.sent,this.responses$=t.subscribe((function(e){return n.setState({responses:e})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.responses$.unsubscribe()}},{key:"render",value:function(){return Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Student"}),Object(r.jsx)("th",{children:"Chapter #"}),Object(r.jsx)("th",{children:"Question #"}),Object(r.jsx)("th",{children:"Response"})]})}),Object(r.jsxs)("tbody",{children:[this.state.responses.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.student}),Object(r.jsx)("td",{children:e.chapterNumber}),Object(r.jsx)("td",{children:e.questionNumber}),Object(r.jsx)("td",{children:e.response})]})})),Object(r.jsx)("tr",{})]})]})}}]),n}(s.Component),Gt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return console.log("In the router."),Object(r.jsx)(h.HashRouter,{basename:"/",children:Object(r.jsx)(v.LastLocationProvider,{children:Object(r.jsxs)(p.g,{children:[Object(r.jsx)(p.d,{path:"/signin/",children:Object(r.jsx)(w,{})}),Object(r.jsx)(p.d,{path:"/home/",exact:!0,component:N}),Object(r.jsx)(z,{path:"/marketplace/",exact:!0,component:It}),Object(r.jsx)(z,{path:"/dashboard/:classID",component:_t}),Object(r.jsx)(z,{path:"/paymentFailed/",exact:!0,component:Ht}),Object(r.jsx)(z,{path:"/studentInfo/:bookID",exact:!0,component:zt}),Object(r.jsx)(z,{path:"/book/buy/:bookID",exact:!0,component:Jt}),Object(r.jsx)(z,{path:"/read/:bookID",exact:!0,component:pt}),Object(r.jsx)(z,{path:"/add/",exact:!0,component:vt}),Object(r.jsx)(z,{path:"/add/:bookID",exact:!0,component:vt}),Object(r.jsx)(p.d,{path:"*",children:Object(r.jsx)(p.c,{to:"/home/"})})]})})})}}]),n}(o.a.Component);console.log("index.js called."),c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(H,{children:Object(r.jsx)(Gt,{})})}),document.getElementById("root"))}},[[531,1,2]]]);
//# sourceMappingURL=main.1f493bc8.chunk.js.map